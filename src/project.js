window.__require=function t(e,i,o){function n(c,a){if(!i[c]){if(!e[c]){var r=c.split("/");if(r=r[r.length-1],!e[r]){var h="function"==typeof __require&&__require;if(!a&&h)return h(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var l=i[c]={exports:{}};e[c][0].call(l.exports,function(t){return n(e[c][1][t]||t)},l,l.exports,t,e,i,o)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<o.length;c++)n(o[c]);return n}({game:[function(t,e,i){"use strict";cc._RF.push(e,"58f6d/e0kdBU53p8wWL+ybJ","game"),cc.Class({extends:cc.Component,properties:{bg1:cc.Node,bg2:cc.Node,hero:cc.Node,heart:cc.Node,left:cc.Node,right:cc.Node,miss:cc.Node,time:cc.Node,num:cc.Label,die:cc.Node,play:cc.Node,gold:cc.Prefab,love:cc.Prefab,scoreDisplay:cc.Label,explain:cc.Node,bgm:{default:null,type:cc.AudioClip}},onLoad:function(){window.game=this,this.isBgMove=!1,this.time.active=!1,this.miss.active=!1,this.die.active=!1,this.gameType=0,this.bg1.y=0,this.bg2.y=this.bg1.y+this.bg1.height,this.isHeroRotate=!1,this.isHeroAngle=!1,this.setTouch(),this.goldTime=0,this.goldPool=new cc.NodePool,this.loveTime=0,this.lovePool=new cc.NodePool,this.score=0,this.scoreDisplay.string=this.score,this.current=cc.audioEngine.play(this.bgm,!0,.3)},start:function(){cc.director.getCollisionManager().enabled=!0},setTouch:function(){this.left.on("touchstart",function(t){this.isHeroAngle=!0,this.explain.active=!1},this),this.left.on("touchend",function(t){this.isHeroAngle=!1},this),this.right.on("touchstart",function(t){this.isHeroRotate=!0,this.explain.active=!1},this),this.right.on("touchend",function(t){this.isHeroRotate=!1},this),this.miss.on("touchstart",function(t){this.heart.active=!1,this.time.active=!0,this.timeNum=5,this.num.string=this.timeNum,this.schedule(function(){this.timeNum--,this.num.string=this.timeNum,0==this.timeNum&&(this.heart.active=!0,this.time.active=!1,this.miss.active=!1)},1)},this),this.miss.on("touchend",function(t){this.heart.active=!0,this.time.active=!1,this.miss.active=!1},this)},setBg:function(){this.bg1.y=this.bg1.y-1,this.bg2.y=this.bg2.y-1,this.bg1.y<=-this.bg1.height&&(this.bg1.y=this.bg2.y+this.bg1.height),this.bg2.y<=-this.bg1.height&&(this.bg2.y=this.bg1.y+this.bg1.height)},setHeroAngle:function(){this.hero.angle=this.hero.angle+5},setHeroRotate:function(){this.hero.angle=this.hero.angle-5},clickBtn:function(t,e){"revive"==e?(this.gameType=0,this.play.active=!0,this.die.active=!1,this.miss.active=!0,this.score=0,this.scoreDisplay.string=this.score,this.current=cc.audioEngine.play(this.bgm,!0,.3)):"again"==e?(this.gameType=0,this.play.active=!0,this.die.active=!1):"reave"==e&&this.gameOver()},getGoldPosition:function(){var t,e=this.node.y+Math.random()*this.node.height/1.5,i=this.node.width/1.6;return t=(Math.random()-.5)*i,cc.v2(t,e)},createGold:function(){var t=null;(t=this.goldPool.size()>0?this.goldPool.get():cc.instantiate(this.gold)).parent=this.node;var e=this.getGoldPosition();t.setPosition(e)},onGoldKilled:function(t){this.goldPool.put(t)},removeAllGold:function(){for(var t=this.node.children,e=t.length-1;e>=0;e--){t[e].getComponent("gold")&&this.onGoldKilled(t[e])}},getLovePosition:function(){var t,e=this.node.y+Math.random()*this.node.height,i=this.node.width/2;return t=(Math.random()-.5)*i,cc.v2(t,e)},createLove:function(){var t=null;(t=this.lovePool.size()>0?this.lovePool.get():cc.instantiate(this.love)).parent=this.node;var e=this.getLovePosition();t.setPosition(e)},onLoveKilled:function(t){this.lovePool.put(t)},removeAllLove:function(){for(var t=this.node.children,e=t.length-1;e>=0;e--){t[e].getComponent("love")&&this.onLoveKilled(t[e])}},gainScore:function(t){this.score+=t,this.scoreDisplay.string=this.score.toString()},getScore:function(){return parseInt(this.scoreDisplay.string)},updateScore:function(){var t=this.scoreDisplay.string,e={score:t},i=cc.sys.localStorage.getItem("score"),o=cc.sys.localStorage.getItem("topScore");(!o||parseInt(o)<parseInt(t))&&cc.sys.localStorage.setItem("topScore",t),i?((i=JSON.parse(i))instanceof Array||(i=[]),i.unshift(e)):(i=[]).unshift(e),cc.sys.localStorage.setItem("currentScore",t),cc.sys.localStorage.setItem("score",JSON.stringify(i))},gameDie:function(){this.gameType=1,this.removeAllGold(),this.removeAllLove(),this.play.active=!1,this.die.active=!0,cc.audioEngine.stop(this.current)},gameOver:function(){this.updateScore(),cc.audioEngine.stop(this.current),cc.director.loadScene("over")},update:function(t){this.setBg(),this.isHeroRotate&&this.setHeroRotate(),this.isHeroAngle&&this.setHeroAngle(),this.goldTime++,75==this.goldTime&&(this.goldTime=0,0==this.gameType&&this.createGold()),this.loveTime++,720==this.loveTime&&(this.loveTime=0,0==this.gameType&&this.createLove())}}),cc._RF.pop()},{}],gold:[function(t,e,i){"use strict";cc._RF.push(e,"2d81e8+oHpMub9bVjG+BYNg","gold"),cc.Class({extends:cc.Component,properties:{score:{default:0,type:cc.Integer,tooltip:"\u83b7\u5f97\u7684\u5206\u6570"},HP:{default:0,type:cc.Integer,tooltip:"\u8840\u91cf"},goldm:{default:null,type:cc.AudioClip}},onCollisionEnter:function(t,e){if(0==t.tag&&0===this.HP){this.HP--;var i=this.getComponent(cc.Animation);return i.play("gdie"),i.on("finished",this.onFinished,this),cc.audioEngine.play(this.goldm,!1),void(this.HP<0&&game.gainScore(this.score))}},onFinished:function(){this.node.destroy()},update:function(t){0==game.gameType&&(this.node.y=this.node.y-5),this.node.y<=-766&&game.onGoldKilled(this.node)}}),cc._RF.pop()},{}],heart:[function(t,e,i){"use strict";cc._RF.push(e,"01564CnBP1E1JPID3QM0qeq","heart"),cc.Class({extends:cc.Component,properties:{heartm:{default:null,type:cc.AudioClip},foodm:{default:null,type:cc.AudioClip}},onCollisionEnter:function(t,e){return 2==t.tag?(this.getComponent(cc.Animation).play("hdie"),cc.audioEngine.play(this.heartm,!1),void game.gameOver(this.node)):3==t.tag?(this.getComponent(cc.Animation).play("hmove"),void cc.audioEngine.play(this.foodm,!1)):void 0},update:function(t){}}),cc._RF.pop()},{}],love:[function(t,e,i){"use strict";cc._RF.push(e,"d9309pmJEtEx450FXzgd2ON","love"),cc.Class({extends:cc.Component,properties:{score:{default:0,type:cc.Integer,tooltip:"\u83b7\u5f97\u7684\u5206\u6570"},HP:{default:0,type:cc.Integer,tooltip:"\u8840\u91cf"},heartm:{default:null,type:cc.AudioClip}},onCollisionEnter:function(t,e){if(0==t.tag){var i=this.getComponent(cc.Animation);return i.play("ldie"),i.on("finished",this.onFinished,this),cc.audioEngine.play(this.heartm,!1),void game.gameOver(this.node)}1==t.tag&&(game.onLoveKilled(this.node),game.gainScore(this.score))},onFinished:function(){this.node.destroy()},update:function(t){0==game.gameType&&(this.node.y=this.node.y-2.5),this.node.y<=-756&&game.onLoveKilled(this.node)}}),cc._RF.pop()},{}],over:[function(t,e,i){"use strict";cc._RF.push(e,"71ccf29ynBL3q9/Z75hR2iz","over"),cc.Class({extends:cc.Component,properties:{log:cc.Node,currentScore:cc.Label,topScore:cc.Label,wxSubContextView:cc.Node,rankname:cc.Node,rank:cc.Button},onLoad:function(){this.isLogRotate=!0;var t=cc.sys.localStorage.getItem("topScore");this.topScore.string=t;var e=cc.sys.localStorage.getItem("currentScore");this.currentScore.string=e,this.passiveShare(),this.initUserInfoButton(),this.wxSubContextView.active=!1,this.rankname.active=!1,this.rank.node.on("click",this.showRank,this)},showRank:function(){if("undefined"!=typeof wx){this.wxSubContextView.active=!0,this.rankname.active=!0;var t=cc.sys.localStorage.getItem("topScore");wx.getOpenDataContext().postMessage({message:t})}},setLog:function(){this.log.angle=this.log.angle+.8},clickBtn:function(t,e){if("home"==e)cc.director.loadScene("ready");else if("share"==e){if("undefined"==typeof wx)return;var i=cc.sys.localStorage.getItem("currentScore");wx.shareAppMessage({title:"\u5b88\u62a4\u7231\u5fc3, \u8ba9\u6211\u4eec\u4e00\u8d77\u6765\u5b88\u62a4\u6211\u4eec\u7684\u7231\u5fc3\uff0c\u8fd9\u6b21\u6211\u5b88\u62a4\u4e86"+i+"\u5206",imageUrl:canvas.toTempFilePathSync({width:720,height:576,destWidth:500,destHeight:400})})}else if("again"==e)cc.director.loadScene("play");else if("close"==e)this.wxSubContextView.active=!1,this.rankname.active=!1,wx.getOpenDataContext().postMessage({message:"clear"});else if("guang2"==e){if(window.location.href="http://www.baidu.com","undefined"==typeof wx)return;wx.navigateToMiniProgram({appId:"wx1234",path:"",extraData:{foo:"bar"},envVersion:"release",success:function(t){}})}},passiveShare:function(){if("undefined"!=typeof wx){wx.showShareMenu({success:function(t){console.log("\u5f00\u542f\u88ab\u52a8\u8f6c\u53d1\u6210\u529f\uff01")},fail:function(t){console.log(t),console.log("\u5f00\u542f\u88ab\u52a8\u8f6c\u53d1\u5931\u8d25\uff01")}});var t=cc.sys.localStorage.getItem("currentScore");wx.onShareAppMessage(function(){return{title:"\u5b88\u62a4\u7231\u5fc3, \u8ba9\u6211\u4eec\u4e00\u8d77\u6765\u5b88\u62a4\u6211\u4eec\u7684\u7231\u5fc3\uff0c\u8fd9\u6b21\u6211\u5b88\u62a4\u4e86"+t+"\u5206",imageUrl:canvas.toTempFilePathSync({width:720,height:576,destWidth:500,destHeight:400})}})}},initUserInfoButton:function(){if("undefined"!=typeof wx){var t=wx.getSystemInfoSync(),e=t.windowWidth,i=t.windowHeight,o=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:e,height:i,lineHeight:40,backgroundColor:"#00000000",color:"#00000000",textAlign:"center",fontSize:10,borderRadius:4}});o.onTap(function(t){t.userInfo?console.log("\u6388\u6743\u6210\u529f\uff01"):console.log("\u6388\u6743\u5931\u8d25\uff01"),o.hide(),o.destroy()})}},update:function(t){this.setLog()}}),cc._RF.pop()},{}],start:[function(t,e,i){"use strict";cc._RF.push(e,"506a3o7SVNP+YCFlrkUrFqN","start"),cc.Class({extends:cc.Component,properties:{log:cc.Node},onLoad:function(){this.isLogRotate=!0},start:function(){cc.loader.downloader.loadSubpackage("animate",function(t){if(t)return console.error(t);console.log("load subpackage successfully.")})},setLog:function(){this.log.angle=this.log.angle-.8},clickBtn:function(t,e){if("start"==e)cc.director.loadScene("play");else if("love"==e){if(window.location.href="https://air-github-io.pages.dev/","undefined"==typeof wx)return;wx.navigateToMiniProgram({appId:"wx72694bd63f777122",path:"",extraData:{foo:"bar"},envVersion:"release",success:function(t){}})}else if("guang"==e){if(window.location.href="http://www.baidu.com","undefined"==typeof wx)return;wx.navigateToMiniProgram({appId:"wx1234",path:"",extraData:{foo:"bar"},envVersion:"release",success:function(t){}})}},update:function(t){this.setLog()}}),cc._RF.pop()},{}]},{},["game","gold","heart","love","over","start"]);